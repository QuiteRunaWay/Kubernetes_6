# Домашнее задание к занятию "13.1 контейнеры, поды, deployment, statefulset, services, endpoints"
Настроив кластер, подготовьте приложение к запуску в нём. Приложение стандартное: бекенд, фронтенд, база данных. Его можно найти в папке 13-kubernetes-config.

## Задание 1: подготовить тестовый конфиг для запуска приложения
Для начала следует подготовить запуск приложения в stage окружении с простыми настройками. Требования:
* под содержит в себе 2 контейнера — фронтенд, бекенд;
* регулируется с помощью deployment фронтенд и бекенд;
* база данных — через statefulset.

### Ответ: 

Очистил от всего, что было сделано до этого:

![image](https://user-images.githubusercontent.com/92969676/194070109-382f4ac3-d613-427a-995d-75d867f68eb6.png)

![image](https://user-images.githubusercontent.com/92969676/194070283-08e94489-828e-4dde-9de2-47d1daf48d74.png)

Далее готовим конфиг для stage окружения [stage.yaml](Stage\stage.yaml).

Создаем Deployment c наименованием нашего приложения multitool, состоящий из 1 пода, который содержит в себе 2 контейнера:

![image](https://user-images.githubusercontent.com/92969676/194072214-165c7dae-eea7-43bf-9778-284ca57c15ee.png)

![image](https://user-images.githubusercontent.com/92969676/194072734-114a1a25-0a78-4bdb-9439-4e9eee3ee79f.png)

Так же отдельно создаем БД через statefulset:

Первоначальный конфиг не запустился:

![image](https://user-images.githubusercontent.com/92969676/194079267-b328403a-66eb-4deb-92d4-a6b45e762448.png)

![image](https://user-images.githubusercontent.com/92969676/194078881-43cb7ee3-a1f9-4a8f-a596-a16bc72e4126.png)

![image](https://user-images.githubusercontent.com/92969676/194078757-9a783cd6-68f0-4b0d-8af2-06bea5d725e0.png)

Система ожидает от нас volume, как я понимаю. По этому попробуем изменить конфиг (забегая вперед по лекции), чтобы добавить volume или pv.

Я изменил первоначальный конфиг, добавил в него pv и pvc:

![image](https://user-images.githubusercontent.com/92969676/194081703-26d8cf98-168c-4126-be4f-434a1b4c6b14.png)

И всё запустилось:

![image](https://user-images.githubusercontent.com/92969676/194081569-b04f266c-f854-4049-a90b-1c098a96e0f1.png)

В дальнейшем конфиги PV и PVC выделил в отдельный yaml файл (файл так же приложил).

## Задание 2: подготовить конфиг для production окружения
Следующим шагом будет запуск приложения в production окружении. Требования сложнее:
* каждый компонент (база, бекенд, фронтенд) запускаются в своем поде, регулируются отдельными deployment’ами;
* для связи используются service (у каждого компонента свой);
* в окружении фронта прописан адрес сервиса бекенда;
* в окружении бекенда прописан адрес сервиса базы данных.

### Ответ:

Подготавливаем для каждого компонента свой конфиг (front, back, db). Файл в папке Prod в текущем репозитории. 
Применяем данные файлы в кластере:

![image](https://user-images.githubusercontent.com/92969676/194099478-1bc2a39b-48e0-402a-8904-3846ab2038a8.png)

В итоге у каждого свой сервис:

![image](https://user-images.githubusercontent.com/92969676/194099596-2537bd95-56d6-4140-8e40-fba55d809a40.png)

Каждый компонент в своем поде:

![image](https://user-images.githubusercontent.com/92969676/194101657-d841c78b-ad52-4af7-bfe4-9b078ae3aa62.png)

Каждый регулируется своим Deploy`ем:

![image](https://user-images.githubusercontent.com/92969676/194102046-50cbb83b-c1e3-4494-8e93-6c7efc729c90.png)


## Задание 3 (*): добавить endpoint на внешний ресурс api
Приложению потребовалось внешнее api, и для его использования лучше добавить endpoint в кластер, направленный на это api. Требования:
* добавлен endpoint до внешнего api (например, геокодер).

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

В качестве решения прикрепите к ДЗ конфиг файлы для деплоя. Прикрепите скриншоты вывода команды kubectl со списком запущенных объектов каждого типа (pods, deployments, statefulset, service) или скриншот из самого Kubernetes, что сервисы подняты и работают.

---
